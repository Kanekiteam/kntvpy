<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNTV</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.3/plyr.css" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e1e;
            color: white;
            margin: 0;
            padding: 0;
        }
        .container {
            display: flex;
            height: 100vh;
        }
        .sidebar {
            width: 200px;
            background-color: #000;
            padding: 20px 10px;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .menu {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 5px;
            cursor: pointer;
        }
        .menu-item:hover {
            background-color: #333;
        }
        .main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .channels {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        .channel {
            aspect-ratio: 16 / 9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }
        .channel:hover {
            transform: scale(1.05);
        }
        .channel-logo {
            width: 80%;
            height: 80%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        .channel-logo img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .channel-name {
            position: absolute;
            bottom: 5px;
            font-size: 12px;
        }
        .web-label {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(0,0,0,0.5);
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 10px;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                padding: 10px;
            }
            .menu {
                flex-direction: row;
                justify-content: space-around;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">KNTV</div>
            <div class="menu">
                <div class="menu-item">üìª Emisoras</div>
                <div class="menu-item">üîû Adultos</div>
                <div class="menu-item">üí¨ Telegram</div>
                <div class="menu-item">‚öôÔ∏è Ajustes</div>
            </div>
        </div>
        <div class="main-content">
            <div class="channels" id="channelGrid"></div>
        </div>
    </div>

    <script src="https://cdn.plyr.io/3.7.3/plyr.polyfilled.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
    <script>
        const defaultStream = 'http://c24u.xyz:8080/yosoyodi7/odielguapo/332991.m3u8';
        const channels = [
            {name: 'ABC TV', color: '#ffff00', logo: 'üÖ∞Ô∏è', stream: defaultStream},
            {name: 'C9N', color: '#ff0000', logo: '9Ô∏è‚É£', stream: defaultStream},
            {name: 'Costanera TV', color: '#ffff00', logo: 'üì∫', web: true, stream: defaultStream},
            {name: 'Farra Play', color: '#00ff00', logo: '‚ñ∂Ô∏è', stream: defaultStream},
            {name: 'GEN', color: '#ffffff', logo: 'GEN', web: true, stream: defaultStream},
            {name: 'Hei', color: '#00ffff', logo: 'HEI', web: true, stream: defaultStream},
            {name: 'Lambar√© TV', color: '#0000ff', logo: 'üì∫', stream: defaultStream},
            {name: 'Latele', color: '#ffffff', logo: 'üñ•Ô∏è', stream: defaultStream},
            {name: 'Lobo TV', color: '#ff8000', logo: 'üê∫', stream: defaultStream},
            {name: 'Mi TV Obligado', color: '#ff00ff', logo: 'üì∫', stream: defaultStream},
            {name: 'M√°s TV Encarnaci√≥n', color: '#00ff00', logo: '‚ûï', web: true, stream: defaultStream},
            {name: 'Noticias Paraguay', color: '#ff0000', logo: 'NPY', web: true, stream: defaultStream},
            {name: 'Telefuturo', color: '#000000', logo: 'https://grupovierci.brightspotcdn.com/dims4/default/26b9e86/2147483647/strip/true/crop/1777x1790+0+0/resize/800x806!/quality/90/?url=https%3A%2F%2Fk2-prod-grupo-vierci.s3.us-east-1.amazonaws.com%2Fbrightspot%2F0e%2Fb6%2F257502f9436b86d576eb823654f6%2Flogo-tf.png', isImage: true, stream: 'https://oneplayer.xyz/scrap/telefuturo.php?.m3u8'}
        ];

        const channelGrid = document.getElementById('channelGrid');

        channels.forEach(channel => {
            const channelDiv = document.createElement('div');
            channelDiv.className = 'channel';
            channelDiv.style.backgroundColor = channel.color;
            
            const logo = document.createElement('div');
            logo.className = 'channel-logo';
            if (channel.isImage) {
                const img = document.createElement('img');
                img.src = channel.logo;
                img.alt = channel.name;
                logo.appendChild(img);
            } else {
                logo.textContent = channel.logo;
            }
            
            const name = document.createElement('div');
            name.className = 'channel-name';
            name.textContent = channel.name;
            
            channelDiv.appendChild(logo);
            channelDiv.appendChild(name);
            
            if (channel.web) {
                const webLabel = document.createElement('div');
                webLabel.className = 'web-label';
                webLabel.textContent = 'Web';
                channelDiv.appendChild(webLabel);
            }

            channelDiv.addEventListener('click', () => {
                openPlayer(channel.stream);
            });
            
            channelGrid.appendChild(channelDiv);
        });

        function openPlayer(streamUrl) {
            const playerWindow = window.open('', 'Player', 'width=800,height=600');
            playerWindow.document.write(`
                <!DOCTYPE html>
                <html lang="es">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Player</title>
                    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.3/plyr.css" />
                    <style>
                        body {
                            margin: 0;
                            padding: 0;
                            display: flex;
                            flex-direction: column;
                            height: 100vh;
                            background-color: #000;
                        }
                        #back-button {
                            position: absolute;
                            top: 10px;
                            left: 10px;
                            z-index: 1000;
                            background-color: rgba(0, 0, 0, 0.5);
                            color: white;
                            border: none;
                            padding: 10px;
                            cursor: pointer;
                        }
                        #player {
                            width: 100%;
                            height: 100%;
                        }
                    </style>
                </head>
                <body>
                    <button id="back-button" onclick="window.close()">‚Üê Volver</button>
                    <video id="player"></video>
                    <script src="https://cdn.plyr.io/3.7.3/plyr.polyfilled.js"></script>
                    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
                    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
                    <script>
                        const video = document.getElementById('player');
                        const source = '${streamUrl}';
                        const defaultOptions = {};

                        if (source.includes('.m3u8')) {
                            if (Hls.isSupported()) {
                                const hls = new Hls();
                                hls.loadSource(source);
                                hls.attachMedia(video);
                                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                                    video.play();
                                });
                            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                                video.src = source;
                                video.addEventListener('loadedmetadata', function() {
                                    video.play();
                                });
                            }
                        } else if (source.includes('.mpd')) {
                            const dash = dashjs.MediaPlayer().create();
                            dash.initialize(video, source, true);
                            dash.on('playbackMetaDataLoaded', function() {
                                video.play();
                            });
                        } else {
                            video.src = source;
                            video.addEventListener('loadedmetadata', function() {
                                video.play();
                            });
                        }

                        const player = new Plyr(video, defaultOptions);
                    </script>
                </body>
                </html>
            `);
        }
    </script>
</body>
</html>
